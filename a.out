#! /usr/bin/vvp
:ivl_version "11.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision + 0;
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/system.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/vhdl_sys.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/vhdl_textio.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/v2005_math.vpi";
:vpi_module "/usr/lib/x86_64-linux-gnu/ivl/va_math.vpi";
S_0x55bd0f4e7e60 .scope module, "tb_m_esp32c3" "tb_m_esp32c3" 2 3;
 .timescale 0 0;
P_0x55bd0f4e9040 .param/l "CLK_PERIOD" 1 2 6, +C4<00000000000000000000000000001010>;
L_0x55bd0f4cf680 .functor BUFZ 1, L_0x55bd0f521450, C4<0>, C4<0>, C4<0>;
v0x55bd0f510530_0 .var "dbus_waddr_i", 31 0;
v0x55bd0f510640_0 .var "dbus_wdata_i", 31 0;
v0x55bd0f510710_0 .var "dbus_we_i", 0 0;
v0x55bd0f510810_0 .net "esp32_cs_o", 0 0, L_0x55bd0f5211a0;  1 drivers
v0x55bd0f5108b0_0 .net "esp32_scl_o", 0 0, L_0x55bd0f4d3bb0;  1 drivers
v0x55bd0f5109f0_0 .net "esp32_sda_o", 0 0, L_0x55bd0f4d7e60;  1 drivers
v0x55bd0f510ae0_0 .var "rst_i", 0 0;
v0x55bd0f510b80_0 .net "spi_busy", 0 0, L_0x55bd0f4cf680;  1 drivers
v0x55bd0f510c20_0 .var "w_clk", 0 0;
E_0x55bd0f4e3670 .event edge, v0x55bd0f510b80_0;
S_0x55bd0f4e8040 .scope task, "cpu_write" "cpu_write" 2 45, 2 45 0, S_0x55bd0f4e7e60;
 .timescale 0 0;
v0x55bd0f4d6870_0 .var "addr", 31 0;
v0x55bd0f4d72d0_0 .var "data", 31 0;
E_0x55bd0f4e5430 .event posedge, v0x55bd0f50f880_0;
TD_tb_m_esp32c3.cpu_write ;
    %wait E_0x55bd0f4e5430;
    %load/vec4 v0x55bd0f4d6870_0;
    %assign/vec4 v0x55bd0f510530_0, 0;
    %load/vec4 v0x55bd0f4d72d0_0;
    %assign/vec4 v0x55bd0f510640_0, 0;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x55bd0f510710_0, 0;
    %wait E_0x55bd0f4e5430;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x55bd0f510530_0, 0;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x55bd0f510640_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x55bd0f510710_0, 0;
    %end;
S_0x55bd0f50e640 .scope module, "uut" "m_esp32c3" 2 21, 2 111 0, S_0x55bd0f4e7e60;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "w_clk";
    .port_info 1 /INPUT 1 "rst_i";
    .port_info 2 /INPUT 32 "dbus_waddr_i";
    .port_info 3 /INPUT 1 "dbus_we_i";
    .port_info 4 /INPUT 32 "dbus_wdata_i";
    .port_info 5 /OUTPUT 1 "esp32_sda_o";
    .port_info 6 /OUTPUT 1 "esp32_scl_o";
    .port_info 7 /OUTPUT 1 "esp32_cs_o";
P_0x55bd0f50e840 .param/l "ROLL_ADDR" 1 2 121, C4<00110000000000000000000001001100>;
L_0x55bd0f4d7b60 .functor AND 1, v0x55bd0f510710_0, L_0x55bd0f520d60, C4<1>, C4<1>;
L_0x7fb818b06018 .functor BUFT 1, C4<00110000000000000000000001001100>, C4<0>, C4<0>, C4<0>;
v0x55bd0f50fa20_0 .net/2u *"_ivl_0", 31 0, L_0x7fb818b06018;  1 drivers
v0x55bd0f50fb20_0 .net *"_ivl_2", 0 0, L_0x55bd0f520d60;  1 drivers
v0x55bd0f50fbe0_0 .net "dbus_waddr_i", 31 0, v0x55bd0f510530_0;  1 drivers
v0x55bd0f50fca0_0 .net "dbus_wdata_i", 31 0, v0x55bd0f510640_0;  1 drivers
v0x55bd0f50fd80_0 .net "dbus_we_i", 0 0, v0x55bd0f510710_0;  1 drivers
v0x55bd0f50fe40_0 .net "esp32_cs_o", 0 0, L_0x55bd0f5211a0;  alias, 1 drivers
v0x55bd0f50fee0_0 .net "esp32_scl_o", 0 0, L_0x55bd0f4d3bb0;  alias, 1 drivers
v0x55bd0f50ff80_0 .net "esp32_sda_o", 0 0, L_0x55bd0f4d7e60;  alias, 1 drivers
v0x55bd0f510020_0 .var "r_en", 0 0;
v0x55bd0f5100f0_0 .var "r_tx_data", 31 0;
v0x55bd0f510190_0 .net "rst_i", 0 0, v0x55bd0f510ae0_0;  1 drivers
v0x55bd0f510230_0 .net "w_clk", 0 0, v0x55bd0f510c20_0;  1 drivers
v0x55bd0f510300_0 .net "w_spi_busy", 0 0, L_0x55bd0f521450;  1 drivers
v0x55bd0f5103d0_0 .net "w_trigger", 0 0, L_0x55bd0f4d7b60;  1 drivers
L_0x55bd0f520d60 .cmp/eq 32, v0x55bd0f510530_0, L_0x7fb818b06018;
L_0x55bd0f5215e0 .part v0x55bd0f5100f0_0, 0, 8;
S_0x55bd0f50ea00 .scope module, "spi_to_esp32" "m_spi" 2 143, 2 154 0, S_0x55bd0f50e640;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "w_clk";
    .port_info 1 /INPUT 1 "en";
    .port_info 2 /INPUT 8 "d_in";
    .port_info 3 /OUTPUT 1 "SDA";
    .port_info 4 /OUTPUT 1 "SCL";
    .port_info 5 /OUTPUT 1 "CS";
    .port_info 6 /OUTPUT 1 "busy";
L_0x55bd0f4d7e60 .functor BUFZ 1, v0x55bd0f50f520_0, C4<0>, C4<0>, C4<0>;
L_0x55bd0f4d3bb0 .functor BUFZ 1, v0x55bd0f50f460_0, C4<0>, C4<0>, C4<0>;
v0x55bd0f4d7c90_0 .net "CS", 0 0, L_0x55bd0f5211a0;  alias, 1 drivers
v0x55bd0f4d8aa0_0 .net "SCL", 0 0, L_0x55bd0f4d3bb0;  alias, 1 drivers
v0x55bd0f4d3d10_0 .net "SDA", 0 0, L_0x55bd0f4d7e60;  alias, 1 drivers
v0x55bd0f4d2d50_0 .net *"_ivl_0", 31 0, L_0x55bd0f520f40;  1 drivers
v0x55bd0f4cc170_0 .net *"_ivl_14", 31 0, L_0x55bd0f521290;  1 drivers
L_0x7fb818b060f0 .functor BUFT 1, C4<00000000000000000000000000>, C4<0>, C4<0>, C4<0>;
v0x55bd0f50edc0_0 .net *"_ivl_17", 25 0, L_0x7fb818b060f0;  1 drivers
L_0x7fb818b06138 .functor BUFT 1, C4<00000000000000000000000000000000>, C4<0>, C4<0>, C4<0>;
v0x55bd0f50eea0_0 .net/2u *"_ivl_18", 31 0, L_0x7fb818b06138;  1 drivers
L_0x7fb818b06060 .functor BUFT 1, C4<00000000000000000000000000>, C4<0>, C4<0>, C4<0>;
v0x55bd0f50ef80_0 .net *"_ivl_3", 25 0, L_0x7fb818b06060;  1 drivers
L_0x7fb818b060a8 .functor BUFT 1, C4<00000000000000000000000000000000>, C4<0>, C4<0>, C4<0>;
v0x55bd0f50f060_0 .net/2u *"_ivl_4", 31 0, L_0x7fb818b060a8;  1 drivers
v0x55bd0f50f140_0 .net *"_ivl_6", 0 0, L_0x55bd0f521030;  1 drivers
v0x55bd0f50f200_0 .net "busy", 0 0, L_0x55bd0f521450;  alias, 1 drivers
v0x55bd0f50f2c0_0 .net "d_in", 7 0, L_0x55bd0f5215e0;  1 drivers
v0x55bd0f50f3a0_0 .net "en", 0 0, v0x55bd0f510020_0;  1 drivers
v0x55bd0f50f460_0 .var "r_SCL", 0 0;
v0x55bd0f50f520_0 .var "r_SDA", 0 0;
v0x55bd0f50f5e0_0 .var "r_cnt", 7 0;
v0x55bd0f50f6c0_0 .var "r_data", 7 0;
v0x55bd0f50f7a0_0 .var "r_state", 5 0;
v0x55bd0f50f880_0 .net "w_clk", 0 0, v0x55bd0f510c20_0;  alias, 1 drivers
L_0x55bd0f520f40 .concat [ 6 26 0 0], v0x55bd0f50f7a0_0, L_0x7fb818b06060;
L_0x55bd0f521030 .cmp/ne 32, L_0x55bd0f520f40, L_0x7fb818b060a8;
L_0x55bd0f5211a0 .reduce/nor L_0x55bd0f521030;
L_0x55bd0f521290 .concat [ 6 26 0 0], v0x55bd0f50f7a0_0, L_0x7fb818b060f0;
L_0x55bd0f521450 .cmp/ne 32, L_0x55bd0f521290, L_0x7fb818b06138;
    .scope S_0x55bd0f50ea00;
T_1 ;
    %pushi/vec4 0, 0, 6;
    %store/vec4 v0x55bd0f50f7a0_0, 0, 6;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x55bd0f50f5e0_0, 0, 8;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x55bd0f50f460_0, 0, 1;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x55bd0f50f6c0_0, 0, 8;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x55bd0f50f520_0, 0, 1;
    %end;
    .thread T_1;
    .scope S_0x55bd0f50ea00;
T_2 ;
    %wait E_0x55bd0f4e5430;
    %load/vec4 v0x55bd0f50f3a0_0;
    %load/vec4 v0x55bd0f50f7a0_0;
    %pad/u 32;
    %pushi/vec4 0, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_2.0, 8;
    %pushi/vec4 1, 0, 6;
    %assign/vec4 v0x55bd0f50f7a0_0, 0;
    %load/vec4 v0x55bd0f50f2c0_0;
    %assign/vec4 v0x55bd0f50f6c0_0, 0;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x55bd0f50f5e0_0, 0;
    %jmp T_2.1;
T_2.0 ;
    %load/vec4 v0x55bd0f50f7a0_0;
    %pad/u 32;
    %cmpi/e 1, 0, 32;
    %jmp/0xz  T_2.2, 4;
    %load/vec4 v0x55bd0f50f6c0_0;
    %parti/s 1, 7, 4;
    %assign/vec4 v0x55bd0f50f520_0, 0;
    %load/vec4 v0x55bd0f50f6c0_0;
    %parti/s 7, 0, 2;
    %concati/vec4 0, 0, 1;
    %assign/vec4 v0x55bd0f50f6c0_0, 0;
    %pushi/vec4 2, 0, 6;
    %assign/vec4 v0x55bd0f50f7a0_0, 0;
    %load/vec4 v0x55bd0f50f5e0_0;
    %addi 1, 0, 8;
    %assign/vec4 v0x55bd0f50f5e0_0, 0;
    %jmp T_2.3;
T_2.2 ;
    %load/vec4 v0x55bd0f50f7a0_0;
    %pad/u 32;
    %cmpi/e 2, 0, 32;
    %jmp/0xz  T_2.4, 4;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x55bd0f50f460_0, 0;
    %pushi/vec4 3, 0, 6;
    %assign/vec4 v0x55bd0f50f7a0_0, 0;
    %jmp T_2.5;
T_2.4 ;
    %load/vec4 v0x55bd0f50f7a0_0;
    %pad/u 32;
    %cmpi/e 3, 0, 32;
    %jmp/0xz  T_2.6, 4;
    %pushi/vec4 4, 0, 6;
    %assign/vec4 v0x55bd0f50f7a0_0, 0;
    %jmp T_2.7;
T_2.6 ;
    %load/vec4 v0x55bd0f50f7a0_0;
    %pad/u 32;
    %cmpi/e 4, 0, 32;
    %jmp/0xz  T_2.8, 4;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x55bd0f50f460_0, 0;
    %load/vec4 v0x55bd0f50f5e0_0;
    %pad/u 32;
    %cmpi/e 8, 0, 32;
    %flag_mov 8, 4;
    %jmp/0 T_2.10, 8;
    %pushi/vec4 5, 0, 6;
    %jmp/1 T_2.11, 8;
T_2.10 ; End of true expr.
    %pushi/vec4 1, 0, 6;
    %jmp/0 T_2.11, 8;
 ; End of false expr.
    %blend;
T_2.11;
    %assign/vec4 v0x55bd0f50f7a0_0, 0;
    %jmp T_2.9;
T_2.8 ;
    %load/vec4 v0x55bd0f50f7a0_0;
    %pad/u 32;
    %cmpi/e 5, 0, 32;
    %jmp/0xz  T_2.12, 4;
    %pushi/vec4 0, 0, 6;
    %assign/vec4 v0x55bd0f50f7a0_0, 0;
T_2.12 ;
T_2.9 ;
T_2.7 ;
T_2.5 ;
T_2.3 ;
T_2.1 ;
    %jmp T_2;
    .thread T_2;
    .scope S_0x55bd0f50e640;
T_3 ;
    %wait E_0x55bd0f4e5430;
    %load/vec4 v0x55bd0f510190_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_3.0, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x55bd0f510020_0, 0;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x55bd0f5100f0_0, 0;
    %jmp T_3.1;
T_3.0 ;
    %load/vec4 v0x55bd0f5103d0_0;
    %load/vec4 v0x55bd0f510300_0;
    %nor/r;
    %and;
    %flag_set/vec4 8;
    %jmp/0xz  T_3.2, 8;
    %load/vec4 v0x55bd0f50fca0_0;
    %assign/vec4 v0x55bd0f5100f0_0, 0;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x55bd0f510020_0, 0;
    %jmp T_3.3;
T_3.2 ;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x55bd0f510020_0, 0;
T_3.3 ;
T_3.1 ;
    %jmp T_3;
    .thread T_3;
    .scope S_0x55bd0f4e7e60;
T_4 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x55bd0f510c20_0, 0, 1;
    %delay 5, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x55bd0f510c20_0, 0, 1;
    %delay 5, 0;
    %jmp T_4;
    .thread T_4;
    .scope S_0x55bd0f4e7e60;
T_5 ;
    %vpi_call 2 61 "$display", "Test Start: Initializing and Resetting..." {0 0 0};
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x55bd0f510530_0, 0;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x55bd0f510640_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x55bd0f510710_0, 0;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x55bd0f510ae0_0, 0;
    %pushi/vec4 5, 0, 32;
T_5.0 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_5.1, 5;
    %jmp/1 T_5.1, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x55bd0f4e5430;
    %jmp T_5.0;
T_5.1 ;
    %pop/vec4 1;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x55bd0f510ae0_0, 0;
    %vpi_call 2 68 "$display", "Reset released." {0 0 0};
    %vpi_call 2 71 "$display", "Test 1: Sending first data (0xAB)" {0 0 0};
    %pushi/vec4 805306444, 0, 32;
    %store/vec4 v0x55bd0f4d6870_0, 0, 32;
    %pushi/vec4 171, 0, 32;
    %store/vec4 v0x55bd0f4d72d0_0, 0, 32;
    %fork TD_tb_m_esp32c3.cpu_write, S_0x55bd0f4e8040;
    %join;
    %vpi_call 2 75 "$display", "Waiting for SPI transaction to complete..." {0 0 0};
T_5.2 ;
    %load/vec4 v0x55bd0f510b80_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %cmpi/ne 1, 0, 1;
    %jmp/0xz T_5.3, 6;
    %wait E_0x55bd0f4e3670;
    %jmp T_5.2;
T_5.3 ;
    %vpi_call 2 77 "$display", "SPI transaction started (busy is high)." {0 0 0};
T_5.4 ;
    %load/vec4 v0x55bd0f510b80_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %cmpi/ne 1, 0, 1;
    %jmp/0xz T_5.5, 6;
    %wait E_0x55bd0f4e3670;
    %jmp T_5.4;
T_5.5 ;
    %vpi_call 2 79 "$display", "SPI transaction finished (busy is low)." {0 0 0};
    %pushi/vec4 10, 0, 32;
T_5.6 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_5.7, 5;
    %jmp/1 T_5.7, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x55bd0f4e5430;
    %jmp T_5.6;
T_5.7 ;
    %pop/vec4 1;
    %vpi_call 2 85 "$display", "Test 2: Sending second data (0xCD) to check re-trigger." {0 0 0};
    %pushi/vec4 805306444, 0, 32;
    %store/vec4 v0x55bd0f4d6870_0, 0, 32;
    %pushi/vec4 205, 0, 32;
    %store/vec4 v0x55bd0f4d72d0_0, 0, 32;
    %fork TD_tb_m_esp32c3.cpu_write, S_0x55bd0f4e8040;
    %join;
    %vpi_call 2 89 "$display", "Waiting for second SPI transaction to complete..." {0 0 0};
T_5.8 ;
    %load/vec4 v0x55bd0f510b80_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %cmpi/ne 1, 0, 1;
    %jmp/0xz T_5.9, 6;
    %wait E_0x55bd0f4e3670;
    %jmp T_5.8;
T_5.9 ;
    %vpi_call 2 91 "$display", "Second SPI transaction started (busy is high)." {0 0 0};
T_5.10 ;
    %load/vec4 v0x55bd0f510b80_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %cmpi/ne 1, 0, 1;
    %jmp/0xz T_5.11, 6;
    %wait E_0x55bd0f4e3670;
    %jmp T_5.10;
T_5.11 ;
    %vpi_call 2 93 "$display", "Second SPI transaction finished (busy is low)." {0 0 0};
    %vpi_call 2 96 "$display", "Test Finished." {0 0 0};
    %vpi_call 2 97 "$finish" {0 0 0};
    %end;
    .thread T_5;
    .scope S_0x55bd0f4e7e60;
T_6 ;
    %vpi_call 2 102 "$dumpfile", "tb_m_esp32c3.vcd" {0 0 0};
    %vpi_call 2 103 "$dumpvars", 32'sb00000000000000000000000000000000, S_0x55bd0f4e7e60 {0 0 0};
    %end;
    .thread T_6;
# The file index is used to find the file name in the following table.
:file_names 3;
    "N/A";
    "<interactive>";
    "tb_m_esp32c3.v";
